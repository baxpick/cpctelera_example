name: Build and Push Docker Image (CPC)

on:
  push:
    branches: [ main ]
    paths:
      - '.github/workflows/reusable-docker-build-push.yml'
      - '.github/workflows/docker-build-push-cpc.yml'
      - 'docker/Dockerfile.cpc'
      - 'docker/entrypoint.sh'
  workflow_dispatch: # Allows manual triggering

jobs:
  build-and-push-cpc:
    uses: ./.github/workflows/reusable-docker-build-push-push.yml@main
    with:
      dockerfile: ./docker/Dockerfile.cpc
      image_name: braxpix/cpctelera-build-cpc
      image_version: 1.0
    secrets:
      DOCKERHUB_USERNAME: ${{ vars.DOCKERHUB_USERNAME }}
      DOCKERHUB_PASSWORD: ${{ secrets.DOCKERHUB_PASSWORD }}
